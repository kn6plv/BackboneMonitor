<script>
    const map = L.map("map", {
        attributionControl: false,
        zoomControl: false
    });
    const tiles = L.tileLayer(
        "http://kn6plv-tiles.local.mesh/tile/{z}/{x}/{y}.png", {}
    );
    map.addLayer(tiles);
    map.setView([ 37.7, -122.0 ], 10, { animate: false });
    const all = [];
    const colors = { good: 'green', poor: 'orange', bad: 'red' };
    const icons = { good: L.divIcon({ className: "green-dot-16", iconSize: [ 16, 16 ] }), poor: L.divIcon({ className: "orange-dot-16", iconSize: [ 16, 16 ] }), bad: L.divIcon({ className: "red-dot-16", iconSize: [ 16, 16 ] }) };
    {{#each map.lines}}
    L.polyline([[{{a.lat}},{{a.lon}}],[{{b.lat}},{{b.lon}}]], { color: colors.{{h}}, weight: 2 }).addTo(map);
    {{/each}}
    {{#each map.dots}}
    L.marker([{{l.lat}},{{l.lon}}], { icon: icons.{{h}} }).addTo(map);
    all.push([{{l.lat}},{{l.lon}}]);
    {{/each}}
    map.fitBounds(L.latLngBounds(all), { animate: false, paddingBottomRight: [ 0, document.getElementById("info").offsetHeight ] });
</script>
